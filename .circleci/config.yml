version: 2.1
orbs:
    slack: circleci/slack@3.4.2


# commands:
#     slack_notification : 
#         steps:
#             - slack/notify:
#                 fail_only: true
#                 message: 'hello from slack'
#                 webhook: '${SLACK_WEBHOOK}'
            
     
jobs:
  job_1:
    docker:
      - image: circleci/node
    steps:
      - checkout
      - run: echo "build"
      - slack/notify-on-failure:
        webhook: '${SLACK_WEBHOOK}'
  job_2:
    docker:
      - image: circleci/node
    steps:
      - checkout
      - run: echo "job_2"
      - slack/notify-on-failure:
        webhook: '${SLACK_WEBHOOK}'
  job_3:
    docker:
      - image: circleci/node    
    steps:
      - checkout
      - run: echo "job_3"
      - slack/status:
            # fail_only: true
        # failure_message: "failed job"
            webhook: '${SLACK_WEBHOOK}'
            
  
      
     
workflows:
  first_workflow:
    jobs:
      - job_1
      - job_2
        #   requires:
        #     - job_1
  second_workflow:
    when: always
    jobs:
      - job_1
#       - job_2
#       - job_3

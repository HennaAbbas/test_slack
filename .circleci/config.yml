version: 2.1
orbs:
    slack: circleci/slack@4.4.4
    hello-world: tsub/hello-world@0.0.8
   
jobs:
  my_job:
    docker:
      - image: circleci/node
    steps:

      - run: echo $SLACK_DEFAULT_CHANNEL
      - hello-world/hello
      - slack/notify:
          custom: |
            {
              "blocks": [
                {
                  "type": "section",
                  "fields": [
                    {
                      "type": "plain_text",
                      "text": "*This is a text notification*",
                      "emoji": true
                    }
                  ]
                }
              ]
            }
          event: always 
          
          
          
          
#       - slack/notify:
# #           template: basic_fail_1
#           event: always
#           mentions: '@henna'
#           channel: G017SNS0AJC
#           custom: | 
#             {
#                 "blocks": [
#                     {
#                         "type": "section",
#                         "text": {
#                             "type": "mrkdwn",
#                             "text": "Failed: $CIRCLE_USERNAME's build of \n<$CIRCLE_BUILD_URL|$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME>\n(<https://app.circleci.com/pipelines/github/$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME?branch=$CIRCLE_BRANCH|$CIRCLE_BRANCH>) \n- <$CIRCLE_BUILD_URL|$CIRCLE_JOB> failed" 
#                         }
#                     }
#                 ]
#             }                  
      
      
      
      
      
      
      
      
      
      
      
#       - slack/notify:
# #           template: basic_fail_1
#           event: always
#           mentions: '@henna'
#           channel: G017SNS0AJC
#           custom: | 
#             {
#                 "blocks": [
#                     {
#                         "type": "section",
#                         "text": {
#                             "type": "mrkdwn",
#                             "text": "Failed: $CIRCLE_USERNAME's build of \n<$CIRCLE_BUILD_URL|$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME>\n(<https://app.circleci.com/pipelines/github/$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME?branch=$CIRCLE_BRANCH|$CIRCLE_BRANCH>) \n- <$CIRCLE_BUILD_URL|$CIRCLE_JOB> failed" 
#                         }
#                     }
#                 ]
#             }              



#         - slack/notify:
#               custom: |
#                 {
#                   "blocks": [
#                     {
#                       "type": "section",
#                       "fields": [
#                         {
#                           "type": "plain_text",
#                           "text": "Deployed to data-production",
#                           "emoji": true
#                         }
#                       ]
#                     }
#                   ]
#                 }        
        
        
        
        
        
        
# #             custom: |
# #                             {
# #                               "blocks": [
# #                                 {
# #                                   "type": "section",
# #                                   "fields": [
# #                                     {
# #                                       "type": "plain_text",
# #                                       "text": "Deployed ${CIRCLE_PROJECT_REPONAME} to << parameters.environment >>.",
# #                                       "emoji": true
# #                                     }
# #                                   ]
# #                                 },
# #                                   "type": "actions",
# #                                   "elements": [
# #                                     {
# #                                       "type": "button",
# #                                       "text": {
# #                                         "type": "plain_text",
# #                                         "text": "View Job"
# #                                       },
# #                                       "url": "${CIRCLE_BUILD_URL}"
# #                                     }
# #                                   ]
# #                                 }
# #                               ]
# #                             }
            
#             custom: |
#                 {
#                   "blocks": [
#                     {
#                       "type": "section",
#                       "fields": [
#                         {
#                           "type": "plain_text",
#                           "text": "Deployed ${CIRCLE_PROJECT_REPONAME} to << parameters.environment >>.",
#                           "emoji": true
#                         }
#                       ]
#                     },
#                       "type": "actions",
#                       "elements": [
#                         {
#                           "type": "button",
#                           "text": {
#                             "type": "plain_text",
#                             "text": "View Job"
#                           },
#                           "url": "${CIRCLE_BUILD_URL}"
#                         }
#                       ]
#                     }
#                   ]
#                 }            




workflows:
  my_workflow:
    jobs:
      - my_job:  
          context:
            - SLACK_SECRETS
#       - slack/on-hold:
#           name: Notify Approval
#           context:
#             - SLACK_SECRETS          
#           filters:
#             branches:
#               only: test         
              
              
              #test
              

              

